
;; (8) Bob and Jane are at the mouth of a tunnel.
;;     Bob travels through the tunnel.
;;     Is Bob the same distance to Jane as the length of the tunnel?


(holeMouth ?M ?H)
(instance holeMouth BinaryPredicate)

(documentation holeMouth EnglishLanguage "The portion of a &%Hole that is open to the surroundings of the hole host.")

(domain holeMouth 1 Region)
(domain holeMouth 2 Hole)

(=>
  (and
    (holeMouth ?M ?H)
    (equal ?HOST (HoleHostFn ?H)))
  (and
    (meetsSpatially ?M ?HOST)
    (meetsSpatially ?M ?H)))

(=>
  (and
    (holeMouth ?M ?H)
    (contains ?H ?O)
    (part ?P ?O)
    (not
      (contains ?H ?P)))
  (crosses ?M ?O))

(documentation tunnelMouths EnglishLanguage "A relation declaring the two mouths of a given tunnel.  Every &%Tunnel must have two openings to the surroundings.")

(instance tunnelMouths TernaryPredicate)
(domain tunnelMouths 1 Region)
(domain tunnelMouths 2 Region)
(domain tunnelMouths 3 Tunnel)

(=>
  (instance ?T Tunnel)
  (exists (?M1 ?M2)
    (tunnelMouths ?M1 ?M2 ?T)))

(=>
  (tunnelMouths ?M1 ?M2 ?T)
  (and
    (holeMouth ?M1 ?T1)
    (holeMouth ?M2 ?T1)
    (not
      (equal M1 M2))
    (not
      (connected M1 M2))))

(=>
  (and
    (instance ?T1 Tunnel)
    (tunnelMouths ?M1 ?M2 ?T1)
    (length ?T1 ?L))
  (distance ?M1 ?M2 ?L))

(and
  (instance Tunnel1 Tunnel)
  (equal ?P (TransitFn Tunnel))
  (holeMouth M1 Tunnel1)
  (holeMouth M2 Tunnel1)
  (not
    (equal M1 M2))
  (not
    (connected M1 M2))
  (located Jane M1)
  (origin ?P M1)
  (destination ?P M2)
  (agent ?P John)
  (length Tunnel1 L))

(=>
  (and
    (length ?T ?L)
    (instance ?T Transitway)
    (equal ?P (TransitFn ?T))
    (origin ?P ?O)
    (destination ?P ?D))
  (distance ?O ?D ?L))


(time 250)

(query (and (distance Bob Jane ?L)
	    (length Tunnel ?L)))

(answer yes)
